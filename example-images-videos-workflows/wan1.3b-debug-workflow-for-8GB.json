{"last_node_id":59,"last_link_id":129,"nodes":[{"id":57,"type":"SkipLayerGuidanceDiT","pos":[867.2386474609375,-189.85679626464844],"size":[210,178],"flags":{},"order":8,"mode":4,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":128}],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[123],"slot_index":0}],"properties":{"Node name for S&R":"SkipLayerGuidanceDiT"},"widgets_values":["9, 10","9, 10",3,0.01,0.3,0]},{"id":58,"type":"LoraLoaderModelOnly","pos":[515.921875,392.7481994628906],"size":[315,82],"flags":{},"order":5,"mode":4,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":127}],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[128,129],"slot_index":0}],"properties":{"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["wan21\\wan1.3bcfgdistill-videov40.safetensors",0.99]},{"id":37,"type":"UNETLoader","pos":[514.59912109375,274.49786376953125],"size":[324.56378173828125,82],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[127],"slot_index":0}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["wan13fp16native.safetensors","default"]},{"id":51,"type":"CLIPLoaderGGUF","pos":[518.3028564453125,152.7560577392578],"size":[315,82],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":[102,103],"slot_index":0}],"properties":{"Node name for S&R":"CLIPLoaderGGUF"},"widgets_values":["umt5xxl_fp32-q2_k.gguf","wan"]},{"id":40,"type":"EmptyHunyuanLatentVideo","pos":[859.0339965820312,428.3465881347656],"size":[210,130],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[117],"slot_index":0}],"properties":{"Node name for S&R":"EmptyHunyuanLatentVideo"},"widgets_values":[384,576,33,1]},{"id":28,"type":"SaveAnimatedWEBP","pos":[1466.175048828125,-186.88693237304688],"size":[631.7850952148438,742.2047729492188],"flags":{},"order":14,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":126}],"outputs":[],"properties":{},"widgets_values":["ComfyUI",16,false,100,"fastest"]},{"id":39,"type":"VAELoader","pos":[519.1549072265625,516.1334838867188],"size":[306.36004638671875,58],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"VAE","localized_name":"VAE","type":"VAE","links":[125],"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["wan_2.1_vae.safetensors"]},{"id":48,"type":"VAEDecodeTiled","pos":[1100.2891845703125,406.9992370605469],"size":[309.1665954589844,150],"flags":{},"order":13,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":124},{"name":"vae","localized_name":"vae","type":"VAE","link":125}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[126],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecodeTiled"},"widgets_values":[384,64,64,4]},{"id":52,"type":"CFGZeroStar","pos":[1124.0587158203125,-188.16253662109375],"size":[241.79998779296875,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":129}],"outputs":[{"name":"patched_model","localized_name":"patched_model","type":"MODEL","links":[115],"slot_index":0}],"properties":{"Node name for S&R":"CFGZeroStar"},"widgets_values":[]},{"id":56,"type":"TeaCache","pos":[1096.1114501953125,-120.43938446044922],"size":[315,106],"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":115}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":[116],"slot_index":0}],"properties":{"Node name for S&R":"TeaCache"},"widgets_values":["wan2.1_t2v_1.3B",0.2,1]},{"id":6,"type":"CLIPTextEncode","pos":[522.8845825195312,-190.01649475097656],"size":[304.4969177246094,150.89210510253906],"flags":{},"order":6,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":102}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[106,112],"slot_index":0}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["Ultraman battles a dinosaur, using laser sword, near a large skyscraper.  Urban battle scene from a video of Ultraman.  Slow motion action scene"],"color":"#232","bgcolor":"#353"},{"id":7,"type":"CLIPTextEncode","pos":[525.4572143554688,-1.6570098400115967],"size":[305.7098388671875,114.72174072265625],"flags":{},"order":7,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":103}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[107,113],"slot_index":0}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["过曝，静止不动的画面, 静态 mangled, twisted, static, blurred, paintings, 3d, anime, art, picture, still, gray, worst quality, low quality, dark, black, night"],"color":"#322","bgcolor":"#533"},{"id":54,"type":"KSamplerAdvanced","pos":[852.822021484375,31.43120002746582],"size":[255.10496520996094,334],"flags":{},"order":10,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":123},{"name":"positive","localized_name":"positive","type":"CONDITIONING","link":106},{"name":"negative","localized_name":"negative","type":"CONDITIONING","link":107},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","link":117}],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[118],"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",186,"increment",10,4,"euler","beta",0,4,"disable"]},{"id":55,"type":"KSamplerAdvanced","pos":[1124.9931640625,29.615585327148438],"size":[256.2142028808594,334],"flags":{},"order":12,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":116},{"name":"positive","localized_name":"positive","type":"CONDITIONING","link":112},{"name":"negative","localized_name":"negative","type":"CONDITIONING","link":113},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","link":118}],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[124],"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",186,"increment",10,6.5,"euler","beta",4,10000,"disable"]},{"id":59,"type":"Note","pos":[63.79194259643555,-178.31961059570312],"size":[413.9085693359375,739.490478515625],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["BASIC DEBUG WORKFLOW, AMD 8GB. Wan 1.3billion text2vid\n======================================================\nStart with just 1 frame (single picture) for testing.  Swapping VAE Decode (Tiled) for regular VAE decode node may be faster for medium and short length clips. (320x480) x33 frames. etc. Good range for testing.\n\nRecommended video resolution is (384x576) x61 frames for 8GB cards. 24+GB system DRAM is best. Your glacial advance (render speed) will be measured by lunar cycles.\n\ntry VAE Decode Tiled (tile_size 384) and 480x768 to test the limits of VRAM. with comfyui setting --disable-cuda --use-quad-cross-attention --novram --fp16-unet --fp16-vae,  tile_size from 320 to 384, give or take, should be about optimal. Lowering tile_size reduces VRAM usage & takes longer.\n\nhigher resolution isn't recommended anyways. (768x768) x 33 frames, or higher is typically where proper prompt following and adherence to the training data set occurs.  Even this short clip takes about 24 minutes on a GFX803 test system. Most old GPUs struggle with higher res, since legacy GEMM kernels were never written for such workloads.  and without Triton compile & sage attn, some legacy Nvidia GPU's take almost as long.\n\nCheck Temperature.  Gaming GPUs were never designed for heavy Compute workloads.  old factory thermal paste on the test system still worked but needed a 25% downclock & undervolt to stay under 70 degrees celsius.\n\nKNOWN ISSUE: WAN21 img2Vid with start/end frames can crash during VAE encode node. Completely exhausting System Swap, DRAM and VRAM at the same time might crash and require a reboot to reset the GPU state. Known issue. Likely only works at lower resolution, 320x384 might work. Needs testing, maybe an alternate VAE encode node would work.  HYvid & Skyreels work better, maybe? however require VAE Tiled low tile_size 64 which takes forever. \n\nc:\\PathToZluda\\zluda.exe -- python main.py --disable-cuda --use-quad-cross-attention --disable-smart-memory --cache-lru 0 --reserve-vram 0.1 --force-fp16 --fp16-unet --fp16-vae --novram    (or --bf16-unet --bf16-vae for bf16 dtype models)\n\nThese debug options sometimes help in low VRAM scenarios.  Haven't had much time to test if they still actually work or have been deprecated.  Thank you for testing.  If you have any questions ask on the Github issues page. https://github.com/advanced-lvl-up/Rx470-Vega10-Rx580-gfx803-gfx900-fix-AMD-GPU\n\n---- KSampler: noise_seed, number of steps, \n & scheduler should match. And 'end_at_step' for sampler #1 is the 'start_at_step' for sampler #2.\n\nNodes used: Teacache & GGUF connector from:\nhttps://github.com/welltop-cn/ComfyUI-TeaCache\nhttps://github.com/calcuis/gguf\n\n"],"color":"#223","bgcolor":"#335"}],"links":[[102,51,0,6,0,"CLIP"],[103,51,0,7,0,"CLIP"],[106,6,0,54,1,"CONDITIONING"],[107,7,0,54,2,"CONDITIONING"],[112,6,0,55,1,"CONDITIONING"],[113,7,0,55,2,"CONDITIONING"],[115,52,0,56,0,"MODEL"],[116,56,0,55,0,"MODEL"],[117,40,0,54,3,"LATENT"],[118,54,0,55,3,"LATENT"],[123,57,0,54,0,"MODEL"],[124,55,0,48,0,"LATENT"],[125,39,0,48,1,"VAE"],[126,48,0,28,0,"IMAGE"],[127,37,0,58,0,"MODEL"],[128,58,0,57,0,"MODEL"],[129,58,0,52,0,"MODEL"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.8390545288824909,"offset":[412.7203211795742,232.05279323691718]}},"version":0.4}
